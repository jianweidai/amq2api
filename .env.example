# ============================================
# Amazon Q API 配置
# ============================================
# Amazon Q 的认证信息，用于单账号模式（如果使用多账号管理，可以留空）
AMAZONQ_REFRESH_TOKEN=your_refresh_token_here
AMAZONQ_PROFILE_ARN=
AMAZONQ_CLIENT_ID=your_client_id_here
AMAZONQ_CLIENT_SECRET=your_client_secret_here

# ============================================
# 服务配置
# ============================================
# 服务监听端口，默认 8080
PORT=8080

# ============================================
# 安全配置（重要！）
# ============================================

# ----------------------------------------
# 🔐 管理后台认证：用户名/密码登录
# ----------------------------------------
# 管理后台使用用户名/密码登录认证。
# 
# 首次设置：
#   1. 访问 http://localhost:8080/admin
#   2. 系统会显示设置页面，创建管理员账号
#   3. 输入用户名（3-50 字符）和密码（至少 8 字符）
#   4. 使用创建的账号登录
#
# 安全特性：
#   - 密码使用 bcrypt 加密存储（cost factor 12）
#   - 会话令牌绑定 User-Agent 防止劫持
#   - 登录失败 5 次后账号锁定 15 分钟
#   - 每分钟每 IP 最多 5 次登录尝试
#
# 管理员凭证存储在数据库中（SQLite 或 MySQL）

# API 访问密钥（可选）
# 如果设置了此密钥，调用 /v1/messages 等 API 需要在请求头中添加 X-API-Key
# 例如: curl -H "X-API-Key: your_api_key" http://localhost:8080/v1/messages
API_KEY=

# ============================================
# API Endpoints
# ============================================
# Amazon Q API 端点
AMAZONQ_API_ENDPOINT=https://q.us-east-1.amazonaws.com/
# Amazon Q Token 端点
AMAZONQ_TOKEN_ENDPOINT=https://oidc.us-east-1.amazonaws.com/token

# ============================================
# OAuth 回调配置
# ============================================
# 用于 OAuth 回调的基础 URL，如果不设置则默认使用 http://localhost:PORT
# 生产环境请设置为实际的域名，例如: https://your-domain.com
BASE_URL=

# ============================================
# 数据库配置
# ============================================
# MySQL 数据库配置（可选）
# 如果配置了 MySQL，账号数据将存储到 MySQL；否则使用本地 SQLite
# 适用于多实例部署场景
MYSQL_HOST=
MYSQL_PORT=3306
MYSQL_USER=
MYSQL_PASSWORD=
MYSQL_DATABASE=amq2api

# ============================================
# Prompt Caching 模拟配置
# ============================================
# 是否启用 Prompt Caching 模拟功能
# 启用后会模拟 Claude API 的 cache_control 功能
ENABLE_CACHE_SIMULATION=false

# 缓存过期时间（秒），默认 86400 秒（24 小时）
CACHE_TTL_SECONDS=86400

# 最大缓存条目数，默认 5000
MAX_CACHE_ENTRIES=5000

# ============================================
# 会话绑定配置
# ============================================
# 是否启用会话绑定功能
# 启用后，同一会话（基于 system prompt）的请求会绑定到同一个账号和 conversationId
# 这可以避免工具重复调用和上下文丢失的问题
# 默认启用，设置为 false 可禁用
ENABLE_SESSION_BINDING=true

# ============================================
# Token 自动刷新配置
# ============================================
# 是否启用 Amazon Q Token 的定时自动刷新功能
# 启用后会在后台定期刷新所有账号的 token
ENABLE_AUTO_REFRESH=true

# Token 刷新间隔（单位：小时），默认 5 小时
TOKEN_REFRESH_INTERVAL_HOURS=5

# ============================================
# Token 统计配置
# ============================================
# 指定哪些模型不统计 input_tokens，多个模型用逗号分隔
# 例如: ZERO_INPUT_TOKEN_MODELS=haiku,other
# 留空表示所有模型都统计 input_tokens
ZERO_INPUT_TOKEN_MODELS=

# ============================================
# 输入验证配置
# ============================================
# 是否禁用输入长度验证
# 设置为 true 可以完全禁用输入验证，允许任意长度的请求
DISABLE_INPUT_VALIDATION=false

# Amazon Q 最大输入 tokens 限制，默认 100000
# 仅在 DISABLE_INPUT_VALIDATION=false 时生效
# 如果请求超过此限制，会记录警告但不阻止请求
AMAZONQ_MAX_INPUT_TOKENS=100000

# ============================================
# Gemini 配置
# ============================================
# Gemini OAuth 配置（可选）
# 用于 Gemini 账号的 OAuth 认证
GEMINI_CLIENT_ID=
GEMINI_CLIENT_SECRET=

# Gemini 是否启用，默认 true
GEMINI_ENABLED=true

# Gemini API 端点
GEMINI_API_ENDPOINT=https://daily-cloudcode-pa.sandbox.googleapis.com

# Gemini Refresh Token（可选，用于单账号模式）
GEMINI_REFRESH_TOKEN=

# ============================================
# Gemini 投喂站配置
# ============================================
# 用于投喂站功能的 OAuth 认证，如果不设置则投喂功能不可用
# 投喂站允许用户通过 OAuth 授权贡献自己的 Gemini 账号
GEMINI_DONATE_CLIENT_ID=
GEMINI_DONATE_CLIENT_SECRET=
